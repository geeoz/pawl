<!DOCTYPE html>
<!--
  ~ Copyright 2015 Geeoz Software
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Long loaded page...</title>
</head>
<body>
<div id="page">This is page for test loading elements</div>
<button id="remove" onclick="removeElement()">Remove...</button>
<button id="load-button" onclick="addButton()">Load Button...</button>
<button id="load-input" onclick="addInput()">Load Input...</button>
<button id="load-text" onclick="addText()">Load Text...</button>
<button id="load-new-text" onclick="changeText()">Change Text...</button>
<button id="reload-button" onclick="reloadButton()">Start reloading Button...</button>
</body>
<script>

    (function () {
        setTimeout(function () {
            document.title = 'Page is ready';
        }, 500);
    })();

    function removeElement() {
        var toRemove = document.getElementsByClassName('loaded')[0];
        if (toRemove) {
            toRemove.parentNode.removeChild(toRemove);
        }
    }

    function addButton() {
        setTimeout(function () {
            var button = document.createElement('button');
            button.innerHTML = 'new loaded button';
            button.setAttribute('id', 'new-loaded-button');
            button.setAttribute('class', 'loaded');
            document.body.appendChild(button);
        }, 500);
    }

    function addInput() {
        setTimeout(function () {
            var input = document.createElement('input');
            input.innerHTML = 'new loaded input';
            input.setAttribute('id', 'new-loaded-input');
            input.setAttribute('class', 'loaded');
            document.body.appendChild(input);
        }, 500);
    }

    function addText() {
        setTimeout(function () {
            var div = document.createElement('div');
            div.innerHTML = 'new loaded text';
            div.setAttribute('id', 'new-loaded-div');
            div.setAttribute('class', 'loaded');
            document.body.appendChild(div);
        }, 500);
    }

    function changeText() {
        setTimeout(function () {
            document.getElementById('new-loaded-div').innerHTML = 'text was changed';
        }, 500);
    }

    function reloadButton(){
        var renderButton = function () {
            var toRemove = document.getElementById('new-reloaded-button');
            if (toRemove) {
                toRemove.parentNode.removeChild(toRemove);
            }
            var button = document.createElement('button');
            button.innerHTML = 'new reloaded button';
            button.setAttribute('id', 'new-reloaded-button');
            button.setAttribute('class', 'reloaded');
            document.body.appendChild(button);
        };
        var interval = setInterval(renderButton, 100);
        setTimeout(function () {
            clearInterval(interval);
        }, 500);
    }

</script>
</html>